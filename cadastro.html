<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro - Batalha Naval</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#020202;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.box{
  background:#111;
  padding:25px;
  border-radius:10px;
  width:100%;
  max-width:320px;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:6px;
  border:none;
}
button{
  background:#0af;
  font-weight:bold;
  cursor:pointer;
}
a{
  color:#0af;
  text-decoration:none;
}
p{ text-align:center; margin-top:10px; }
</style>
</head>

<body>

<div class="box">
  <h2>Cadastro</h2>

  <input type="text" id="nome" placeholder="Nome de usuário">
  <input type="email" id="email" placeholder="E-mail">
  <input type="password" id="senha" placeholder="Senha (mín. 6)">

  <button onclick="cadastrar()">Criar Conta</button>

  <p>Já tem conta?<br>
  <a href="login.html">Entrar</a></p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBxq1jjSig-yW0kmtR1d_WBYCcc7Ysjz00",
  authDomain: "batalha-naval-web-5c204.firebaseapp.com",
  databaseURL: "https://batalha-naval-web-5c204-default-rtdb.firebaseio.com",
  projectId: "batalha-naval-web-5c204"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

window.cadastrar = () => {
  const nome = nome.value.trim();
  const email = email.value.trim();
  const senha = senha.value;

  if(!nome) return alert("Digite um nome");
  if(senha.length < 6) return alert("Senha mínima de 6 caracteres");

  createUserWithEmailAndPassword(auth, email, senha)
    .then(res => {
      const uid = res.user.uid;

      set(ref(db, "usuarios/" + uid), {
        nome,
        pontos: 0,
        vitorias: 0
      });

      window.location.href = "login.html";
    })
    .catch(err => alert(err.message));
};
</script>

</body>
</html>